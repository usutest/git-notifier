sidekiq:
  build: .
  dockerfile: Dockerfile_sidekiq
  links:
    - redis
  volumes:
    - .:/usr/src/app

nginx:
  build: .
  dockerfile: Dockerfile_nginx
  links:
    - puma
  ports:
    - "80:80"
    - "443:443"
  volumes:
    - .:/var/www/github-notifier/current

puma:
  build: .
  dockerfile: Dockerfile_puma
  links:
    - redis
  volumes:
    - .:/usr/src/app

redis:
  image: redis:2.8
  command: redis-server --appendonly yes
  volumes:
    - ./tmp/redis:/data:rw
